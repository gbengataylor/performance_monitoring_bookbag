:guid: %guid%
:user: %user%

:openshift_user_password: %password%
:openshift_console_url: %openshift_console_url%
:user_devworkspace_url: https://devspaces.%openshift_cluster_ingress_domain%
:hyperfoil_web_cli_url: https://%user%-hyperfoil.%openshift_cluster_ingress_domain%
:hyperfoil_web_cli_url_auth_creds: https://%user%:%password%@%user%-hyperfoil.%openshift_cluster_ingress_domain%
:hyperfoil_benchmark_definition_url: https://raw.githubusercontent.com/redhat-na-ssa/workshop_performance-monitoring-apps-template/main/scripts/hyperfoil/summit-load-apps.hf.yaml
:grafana_url: https://grafana-route-grafana.%openshift_cluster_ingress_domain%

:sectlinks:
:sectanchors:
:markup-in-source: verbatim,attributes,quotes

= Lab Troubleshooting

== 1. Openshift forbidden error

When executing any command or Task in the DevWorkspace's Terminal...
If you see any error similar to the following

```
Error from server (Forbidden): routes.route.openshift.io "hyperfoil-instance" is forbidden: User "system:serviceaccount:%user%-devspaces:workspace53028c69c2b54fa5-sa" cannot get resource "routes" in API group "route.openshift.io" in the namespace "system:serviceaccount:%user%-devspaces:workspace53028c69c2b54fa5-sa-hyperfoil"
```

From the IDE Task Manager please, execute the the `98: OC Login` Task. Youl will be prompted to entenr your user's password.

image::./imgs/troubleshooting/VSCode_task_manager_oc_login.gif[OC Login Task]

== 2. Hyperfoil Web CLI Authentication

When trying to access the WebCLI for the first time you will be prompted to enter you Lab credentials.

If for some reason you enter the wrong credentials you have to close the current browser window or open a new one in Incognito mode.
That's because Hyperfoil Web CLI currently uses Http Basic Authentication. To avoid that you can type your credential right in the URL address bar: link:{hyperfoil_web_cli_url_auth_creds}[]

This way you don't have to close your current browser window or open a new one in Incognito.

If you take too much time with you Web CLI idle in a browser window, you may also see an error message like this

```
ERROR: Failed to retrieve source for benchmark summit-lab-load-apps: Server responded with unexpected code: 401, UnauthorizedERROR: Server responded with unexpected code: 401, Unauthorized
```

In this case try to use this url link:{hyperfoil_web_cli_url_auth_creds}[] to authenticate the Hyperfoul Web CLI again.